<!doctype html><html lang=ko-KR><head><title>Vue CLI의 Babel 플러그인을 최신 버전으로 업그레이드하기 // A Better Tomorrow</title>
<link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.135.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Jainee"><meta name=description content><link rel=stylesheet href=/css/main.min.12283aeeec082c362666a990ce3183be24923c086349be1e67a59efc9ffe2d67.css><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-WDCLQCSP")</script><meta name=twitter:card content="summary"><meta name=twitter:title content="Vue CLI의 Babel 플러그인을 최신 버전으로 업그레이드하기"><meta name=twitter:description content=" Vue CLI는 Vue 2를 위한 도구입니다.
본 포스팅은 Vue 2 기반의 프로젝트에서 진행한 내용임을 알려드립니다.
Vue.js는 @vue/cli-plugin-babel을 코어 플러그인으로 사용합니다.
Vue.js 코드를 브라우저가 이해할 수 있는 JavaScript 코드로 트랜스파일하기 위해 Babel을 활용하죠.
참고로 저는 프로젝트 코드에서 옵셔널 체이닝(Optional chaining)을 사용하기 위해 관련 내용을 알아보기 시작했어요.
만약 저와 같은 목적을 갖고 계시면서 사이드 이펙트 걱정이 크신 분이시라면 공식 문서에서 안내하는 대로 필요한 의존성만 추가해줘도 괜찮습니다.
하지만 해당 플러그인을 포함하는 버전으로 업그레이드해 넓은 범위의 해결을 추구하는 것이 좋지 않을까하는 개인적인 의견을 덧붙이며, 시작하겠습니다."><meta property="og:url" content="https://j2e4.github.io/post/update-babel-in-vue-two/"><meta property="og:site_name" content="A Better Tomorrow"><meta property="og:title" content="Vue CLI의 Babel 플러그인을 최신 버전으로 업그레이드하기"><meta property="og:description" content=" Vue CLI는 Vue 2를 위한 도구입니다.
본 포스팅은 Vue 2 기반의 프로젝트에서 진행한 내용임을 알려드립니다.
Vue.js는 @vue/cli-plugin-babel을 코어 플러그인으로 사용합니다.
Vue.js 코드를 브라우저가 이해할 수 있는 JavaScript 코드로 트랜스파일하기 위해 Babel을 활용하죠.
참고로 저는 프로젝트 코드에서 옵셔널 체이닝(Optional chaining)을 사용하기 위해 관련 내용을 알아보기 시작했어요.
만약 저와 같은 목적을 갖고 계시면서 사이드 이펙트 걱정이 크신 분이시라면 공식 문서에서 안내하는 대로 필요한 의존성만 추가해줘도 괜찮습니다.
하지만 해당 플러그인을 포함하는 버전으로 업그레이드해 넓은 범위의 해결을 추구하는 것이 좋지 않을까하는 개인적인 의견을 덧붙이며, 시작하겠습니다."><meta property="og:locale" content="ko_KR"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-02-16T00:21:53+09:00"><meta property="article:modified_time" content="2024-10-12T01:11:56+09:00"><meta property="article:tag" content="Vue 2"><meta property="article:tag" content="Vue-Cli"><meta property="article:tag" content="Webpack"><meta property="article:tag" content="Babel"></head><body><header class=app-header><a href=https://j2e4.github.io/><img class=app-header-avatar src=/avatar.jpeg alt=Jainee></a>
<span class=app-header-title>A Better Tomorrow</span><nav class=app-header-menu><a class=app-header-menu-item href=/>Home</a>
-
<a class=app-header-menu-item href=/categories/columns/>Columns</a>
-
<a class=app-header-menu-item href=/tags/>Tags</a></nav><p>오늘보다 내일 더 나은 서비스를 만들기 위해 개발합니다.</p><div class=app-header-social><a href=https://github.com/j2e4 target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>Github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>Vue CLI의 Babel 플러그인을 최신 버전으로 업그레이드하기</h1><div class=post-meta><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Feb 16, 2023
| Oct 12, 2024</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
2 min read</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a class=tag href=https://j2e4.github.io/tags/vue-2/>Vue 2</a>
<a class=tag href=https://j2e4.github.io/tags/vue-cli/>Vue-Cli</a>
<a class=tag href=https://j2e4.github.io/tags/webpack/>Webpack</a>
<a class=tag href=https://j2e4.github.io/tags/babel/>Babel</a></div></div></header><div class=post-content><blockquote><p><em>Vue CLI는 Vue 2를 위한 도구입니다.<br>본 포스팅은 Vue 2 기반의 프로젝트에서 진행한 내용임을 알려드립니다.</em></p></blockquote><p>Vue.js는 <a href=https://cli.vuejs.org/core-plugins/babel.html>@vue/cli-plugin-babel</a>을 코어 플러그인으로 사용합니다.<br>Vue.js 코드를 브라우저가 이해할 수 있는 JavaScript 코드로 트랜스파일하기 위해 <a href=https://babeljs.io/docs/>Babel</a>을 활용하죠.</p><p>참고로 저는 프로젝트 코드에서 <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining>옵셔널 체이닝(Optional chaining)</a>을 사용하기 위해 관련 내용을 알아보기 시작했어요.<br>만약 저와 같은 목적을 갖고 계시면서 사이드 이펙트 걱정이 크신 분이시라면 <a href=https://babeljs.io/docs/babel-plugin-proposal-optional-chaining#installation>공식 문서</a>에서 안내하는 대로 필요한 의존성만 추가해줘도 괜찮습니다.<br>하지만 해당 플러그인을 포함하는 버전으로 업그레이드해 넓은 범위의 해결을 추구하는 것이 좋지 않을까하는 개인적인 의견을 덧붙이며, 시작하겠습니다.</p><h2 id=optional-chaining을-지원하는-babel-버전>Optional Chaining을 지원하는 Babel 버전</h2><p>옵셔널 체이닝을 지원하는 바벨의 플러그인은 <a href=https://babeljs.io/docs/babel-plugin-proposal-optional-chaining>@babel/plugin-proposal-optional-chaining</a>이고 v7.8.0 이상의 <a href=https://babeljs.io/docs/babel-preset-env>@babel/preset-env</a>에서 지원합니다.<br>릴리즈 노트에 따르면 <a href=https://github.com/vuejs/vue-cli/releases/tag/v4.5.19>v4.5.19 이상의 vue-cli</a>부터 에러 없이 사용할 수 있어 보여요.<br>좀 더 최신 버전이 있는지 확인해봤어요.</p><h3 id=latest-버전-확인하기>Latest 버전 확인하기</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn outdated
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Package                Current Wanted Latest Package Type    URL
</span></span><span style=display:flex><span>@vue/cli-plugin-babel  3.12.1  3.12.1 5.0.8  devDependencies https://github.com/vuejs/vue-cli/tree/dev/packages/@vue/cli-plugin-babel#readme
</span></span><span style=display:flex><span>@vue/cli-plugin-eslint 3.12.1  3.12.1 5.0.8  devDependencies https://github.com/vuejs/vue-cli/tree/dev/packages/@vue/cli-plugin-eslint#readme
</span></span><span style=display:flex><span>@vue/cli-service       3.12.1  3.12.1 5.0.8  devDependencies https://cli.vuejs.org/
</span></span></code></pre></div><p>Vue 2에서 지원하는 Babel 플러그인의 latest 버전은 <strong>5.0.8</strong>입니다.<br><code>yarn outdated</code> 명령으로 확인하거나 <a href="https://www.npmjs.com/package/@vue/cli-plugin-babel?activeTab=versions">npm 홈페이지</a>에서 확인할 수 있습니다.<br>Vue 3에서 <a href="https://v3-migration.vuejs.org/recommendations.html#new-framework-level-recommendations:~:text=Build%20Toolchain%3A%20Vue%20CLI%20%2D%3E%20Vite">Vue CLI 대신 Vite를 사용하기를 추천</a>한 걸 보면, 더 이상 새로운 릴리즈가 이루어지진 않을 것 같네요.</p><h3 id=latest-버전으로-업그레이드하기>Latest 버전으로 업그레이드하기</h3><p><code>yarn upgrade</code> 명령에 <code>-L</code>, <code>--latest</code> 옵션을 주면 캐럿, 틸드 등 package.json 파일에 적힌 범위를 무시하고 최신 버전으로 업그레이드할 수 있어요. (참고: <a href=https://classic.yarnpkg.com/lang/en/docs/cli/upgrade/#toc-yarn-upgrade-package-latest-l-caret-tilde-exact-pattern>명시적으로 업그레이드 범위를 지정하는 옵션</a>)<br>Major 버전까지 가장 최신으로 업그레이드하기 위해 <code>-L</code> 옵션을 주고 ESLint 플러그인과 CLI Service 버전도 함께 올려주었습니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yarn upgrade @vue/cli-plugin-babel -L
</span></span><span style=display:flex><span>yarn upgrade @vue/cli-plugin-eslint -L
</span></span><span style=display:flex><span>yarn upgrade @vue/cli-service -L
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;devDependencies&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@vue/cli-plugin-babel&#34;</span>: <span style=color:#e6db74>&#34;^5.0.8&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@vue/cli-plugin-eslint&#34;</span>: <span style=color:#e6db74>&#34;^5.0.8&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@vue/cli-service&#34;</span>: <span style=color:#e6db74>&#34;^5.0.8&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=polyfill-주입이-필요한-경우>Polyfill 주입이 필요한 경우</h2><p>제가 유지보수하는 프로젝트는 폴리필을 주입하기 위해 babel-polyfill 라이브러리를 사용하고 있었어요.<br>babel-polyfill 라이브러리는 <a href=https://babeljs.io/docs/babel-polyfill>Babel v7.4부터 deprecated 패키지</a>라서 대체해 주어야 했기 때문에 아래 과정을 추가로 진행했습니다.</p><h3 id=babel-loader-구성>Babel Loader 구성</h3><p>Webpack이 번들링할 때 Babel Loader가 전처리할 수 있도록 <a href=https://webpack.js.org/loaders/babel-loader/>Webpack 공식 문서</a>를 참고해 로더를 구성했어요.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// webpack.config.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rules</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.m?js$/</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>exclude</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/node_modules/</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>use</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;babel-loader&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>options</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>presets</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>            [<span style=color:#e6db74>&#34;@babel/preset-env&#34;</span>, { <span style=color:#a6e22e>useBuiltIns</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;usage&#34;</span>, <span style=color:#a6e22e>corejs</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;3&#34;</span> }],
</span></span><span style=display:flex><span>          ],
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span></code></pre></div><p><code>useBuiltIns</code>, <code>corejs</code> 옵션을 간단히 설명하자면,</p><ul><li><code>useBuiltIns</code>: 폴리필을 주입할 방식을 정의해요. (예시 값: <code>"usage"</code>, <code>"entry"</code>, <code>false</code>)<ul><li><code>"usage"</code>: 각 파일에서 사용하는 특정 폴리필을 주입합니다.</li></ul></li><li><code>corejs</code>: 사용할 <code>core-js</code>의 버전을 정의해요. Minor 버전도 지정할 수 있습니다. (예시 값: <code>"2"</code>, <code>"3"</code> 등)</li></ul><p>좀 더 다양한 옵션과 자세한 설명은 <a href=https://babeljs.io/docs/babel-preset-env>공식 문서</a>를 참고해주세요.</p><h3 id=third-party-라이브러리>Third-party 라이브러리</h3><p>Babel은 기본적으로 node_modules/ 경로의 파일을 처리하지 않는다고 해요.<br>폴리필 주입이 필요한 third-party 라이브러리가 있다면 아래와 같이 트랜스파일할 라이브러리를 적어 주시면 됩니다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// vue.config.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>transpileDependencies</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;vuetify&#34;</span>, <span style=color:#e6db74>&#34;ant-design-vue&#34;</span>],
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};
</span></span></code></pre></div><p>옵션에 대한 좀 더 자세한 설명은 <a href=https://cli.vuejs.org/config/#transpiledependencies>Vue CLI 공식 문서</a>를 참고해주세요.</p></div><div class=post-footer></div></article></main></body></html>